<!-- <div class="container d-flex justify-content-center align-items-center" style="min-height: 85vh;">
  <div class="card p-4 shadow-sm" style="width: 380px;">

    <form [formGroup]="form" (ngSubmit)="submit()" style="display: flex; flex-direction: column; gap: 20px;">
      
      <input formControlName="newPassword" type="password" class="form-control mb-2" placeholder="Enter a new password">
    
      <input formControlName="confirmPassword" type="password" class="form-control mb-2" placeholder="Confirm password">

      <button class="btn btn-success w-100">Change Password</button>

      <p class="text-dander mt-2" *ngIf="form.value.newPassword !== form.value.confirmPassword && form.value.confirmPassword">Password do not match.</p>
    </form>

    <p class="text-success mt-2">{{ message }}</p>
  </div>
</div> -->


<div class="container d-flex justify-content-center align-items-center" style="min-height: 85vh;">
  <div class="card p-4 shadow-sm" style="width: 380px;">

    <form [formGroup]="form" (ngSubmit)="submit()" style="display: flex; flex-direction: column; gap: 20px;">
      
      <!-- New Password Field -->
      <div>
        <input 
          formControlName="newPassword" 
          type="password" 
          class="form-control mb-1" 
          placeholder="Enter a new password"
          [class.is-invalid]="form.get('newPassword')?.invalid && (form.get('newPassword')?.touched || form.get('newPassword')?.dirty)">
        
        <!-- Validation Messages for New Password -->
        <div class="invalid-feedback" style="display: block;" 
             *ngIf="form.get('newPassword')?.invalid && (form.get('newPassword')?.touched || form.get('newPassword')?.dirty)">
          <div *ngIf="form.get('newPassword')?.errors?.['required']">
            Password is required
          </div>
          <div *ngIf="form.get('newPassword')?.errors?.['minlength']">
            Password must be at least 6 characters
          </div>
        </div>
      </div>

      <!-- Confirm Password Field -->
      <div>
        <input 
          formControlName="confirmPassword" 
          type="password" 
          class="form-control mb-1" 
          placeholder="Confirm password"
          [class.is-invalid]="(form.get('confirmPassword')?.invalid && (form.get('confirmPassword')?.touched || form.get('confirmPassword')?.dirty)) 
            || (form.value.newPassword !== form.value.confirmPassword && form.value.confirmPassword)">
        
        <!-- Validation Messages for Confirm Password -->
        <div class="invalid-feedback" style="display: block;" 
             *ngIf="form.get('confirmPassword')?.invalid && (form.get('confirmPassword')?.touched || form.get('confirmPassword')?.dirty)">
          <div *ngIf="form.get('confirmPassword')?.errors?.['required']">
            Please confirm your password
          </div>
        </div>
      </div>

      <!-- Password Mismatch Error -->
      <div *ngIf="form.value.newPassword !== form.value.confirmPassword && form.value.confirmPassword && form.get('confirmPassword')?.valid">
        <p class="text-danger small mb-0" style="font-size: 0.875rem;">
          Passwords do not match.
        </p>
      </div>

      <!-- Submit Button -->
      <button 
        type="submit" 
        class="btn btn-success w-100"
        [disabled]="form.invalid || (form.value.newPassword !== form.value.confirmPassword)">
        Change Password
      </button>

      <!-- Server/API Messages -->
      <div *ngIf="message" class="mt-2">
        <p [class]="message.includes('Successfully') ? 'text-success' : 'text-danger'" 
           class="text-center small mb-0">
          {{ message }}
        </p>
      </div>
    </form>
  </div>
</div>